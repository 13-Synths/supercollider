New SC documentation system, work in progress
=============================================
Much more information can be read here: https://docs.google.com/document/edit?id=13jY-FLhwFYgzGFVTSb31eTZOsxl77eVLxuCIsXcZ7BE&hl=en&authkey=CJu58MQJ

The markup language parser is in ScDoc.sc, copy or symlink this to your Extensions folder.
Try it like this:

p = ScDocParser.new
p.parseFile("/home/lijon/Coding/ScDoc/test.sch").dump
p.parse("inline code::code example::.").dump

tag             has-text    structural  modal   need-closing    nestable
------------------------------------------------------------------------
title           S
class           S
doctype         S
keywords        S
related         S
summary         S
note            S
warning         S
section         S           1
subsection      S           2
classmethod     S           3
instancemethod  S           3
argument        S           4
description                 1
methods                     1
examples                    1
list                                            x               x
numberedlist                                    x               x
definitionlist                                  x               x
table                                           x               x
code            V                       x       x
link            V                       x       x
emphasis        V                       x       x
##
||
(prose)         V

S is single-line (tag is terminated by newline)
V is variable-line
1-4 denotes structural level

Note that single vs variable line is only applicable for tags that has a text-field. Also note that modal, structural and nestable are exclusive. nestable can be seen as a structural tag without explicit level. It's also because of the explicit level that the structural tag don't need closing.

All in all we have 6 different categories of tags, not counting the internal 'prose' tag:

- singlelinetext
- singlelinetext-structural
- structural
- range-nestable
- varilinetext-range-modal
- delimiters

TODO
====

- parser: Don't split by lines but pass newlines to handleWord and let it call endLine for us? and inc lineno..
important: then we must check if the whitespace-word contains newline... (or create a regex rule that matches single newlines?)
also let handleWord inc wordno..
note: we could then also match blank lines by regex "\n\n*" and pass them to handleWord to split prose or perhaps insert an internal
'blankline' tag?

- Grab introspection data for methods, arguments, class inheritance, etc..
should this be done in the parser, filled into the tree later, or added while rendering?

- Overview generations:
  All documents alphabetically
  All documents by categories
  All documents by keywords
  All classes by inheritance tree
  All classes alphabetically
  All classes by categories
  All ugens alphabetically
  All ugens by categories
  All methods

- Code to traverse a directory tree of doc source files and render into another directory tree, checking time-stamps to see if files need update or not.

- Handle extensions (extra classes and method additions)
should merge stuff into the tree before parsing..

- HTML renderer.

- split prose in multiple elements by blank lines in the parser, or handle them in the renderer?

VALIDATION
----------
docType must be the first tag, so that it can control which tags are allowed? Or do a separate validation pass afterwards?

Some tags should only be allowed once. like class, title, related, keywords, summary, description, methods, examples..
Keep a dictionary with tag occurence count?


